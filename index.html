<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Theatre Express | Order & Enjoy</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Open+Sans:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg-color: #000000;
        --head-color: #ffffff;
        --secondary-color: #b3b3b3;
        --theme-color: #ab7427;
        --light-gray: #222222;
        --medium-gray: #333333;
        --success-color: #27ae60;
        --error-color: #e74c3c;
        --warning-color: #f39c12;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Open Sans", sans-serif;
        background-color: var(--bg-color);
        color: var(--head-color);
        line-height: 1.6;
        overflow-x: hidden;
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-family: "Montserrat", sans-serif;
        font-weight: 700;
      }

      /* Top Bar */
      .top-bar {
        background-color: var(--bg-color);
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 2px solid var(--theme-color);
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
      }

      .logo {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .logo-icon {
        font-size: 1.8rem;
        color: var(--theme-color);
      }

      .logo-text {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--head-color);
      }

      .cart-summary {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .cart-icon {
        position: relative;
        font-size: 1.3rem;
        color: var(--head-color);
        cursor: pointer;
      }

      .cart-count {
        position: absolute;
        top: -8px;
        right: -8px;
        background-color: var(--theme-color);
        color: var(--head-color);
        font-size: 0.7rem;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
      }

      /* Progress Steps - Clickable */
      .progress-steps {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 70px 20px 20px;
        gap: 10px;
      }

      .step {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 5px;
        flex: 1;
        max-width: 120px;
        cursor: pointer;
        transition: all 0.3s;
      }

      .step:hover .step-circle {
        transform: scale(1.05);
      }

      .step.disabled {
        cursor: not-allowed;
        opacity: 0.5;
      }

      .step.disabled:hover .step-circle {
        transform: none;
      }

      .step-circle {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background-color: var(--light-gray);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        color: var(--secondary-color);
        border: 2px solid var(--secondary-color);
        transition: all 0.3s;
      }

      .step.active .step-circle {
        background-color: var(--theme-color);
        border-color: var(--theme-color);
        color: var(--head-color);
        transform: scale(1.1);
      }

      .step.completed .step-circle {
        background-color: var(--success-color);
        border-color: var(--success-color);
        color: var(--head-color);
      }

      .step-name {
        font-size: 0.8rem;
        text-align: center;
        color: var(--secondary-color);
        font-weight: 500;
      }

      .step.active .step-name {
        color: var(--head-color);
        font-weight: 600;
      }

      .step-line {
        flex: 1;
        height: 2px;
        background-color: var(--secondary-color);
        margin: 0 5px;
        margin-top: 20px;
      }

      .step.active ~ .step .step-line {
        background-color: var(--secondary-color);
      }

      .step.active .step-line,
      .step.completed .step-line {
        background-color: var(--theme-color);
      }

      .step.completed ~ .step .step-line {
        background-color: var(--theme-color);
      }

      /* Main Content */
      .main-content {
        padding: 20px;
        max-width: 1200px;
        margin: 0 auto;
      }

      /* Step Sections */
      .step-section {
        display: none;
        animation: fadeIn 0.4s ease;
      }

      .step-section.active {
        display: block;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .section-title {
        margin-bottom: 25px;
      }

      .section-title h2 {
        font-size: 1.8rem;
        margin-bottom: 8px;
        color: var(--head-color);
      }

      .section-title p {
        color: var(--secondary-color);
        font-size: 1rem;
      }

      /* Step 1: Categories - Direct Navigation */
      .categories-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .category-card {
        background-color: var(--light-gray);
        border-radius: 12px;
        overflow: hidden;
        cursor: pointer;
        transition: all 0.3s;
        border: 2px solid transparent;
        text-decoration: none;
        display: block;
      }

      .category-card:hover {
        transform: translateY(-5px);
        border-color: var(--theme-color);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
      }

      .category-card.active {
        border-color: var(--theme-color);
        box-shadow: 0 5px 15px rgba(171, 116, 39, 0.2);
      }

      .category-img {
        height: 140px;
        background-color: var(--medium-gray);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--theme-color);
        font-size: 3rem;
      }

      .category-content {
        padding: 20px;
      }

      .category-name {
        font-size: 1.3rem;
        margin-bottom: 8px;
        color: var(--head-color);
      }

      .category-desc {
        color: var(--secondary-color);
        font-size: 0.9rem;
      }

      .category-action {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-top: 15px;
      }

      .category-price {
        color: var(--theme-color);
        font-weight: 600;
        font-size: 1.1rem;
      }

      .category-select {
        color: var(--head-color);
        font-size: 0.9rem;
        font-weight: 500;
      }

      /* Step 2: Items */
      .items-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .item-card {
        background-color: var(--light-gray);
        border-radius: 12px;
        overflow: hidden;
        transition: all 0.3s;
      }

      .item-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
      }

      .item-img {
        height: 140px;
        background-color: var(--medium-gray);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--theme-color);
        font-size: 2.5rem;
        position: relative;
      }

      .item-badge {
        position: absolute;
        top: 10px;
        right: 10px;
        background-color: var(--theme-color);
        color: var(--head-color);
        font-size: 0.7rem;
        padding: 3px 8px;
        border-radius: 10px;
        font-weight: 600;
      }

      .item-content {
        padding: 20px;
      }

      .item-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 10px;
      }

      .item-name {
        font-size: 1.1rem;
        color: var(--head-color);
        flex: 1;
      }

      .item-price {
        font-weight: 700;
        color: var(--theme-color);
        font-size: 1.2rem;
        margin-left: 10px;
      }

      .item-desc {
        color: var(--secondary-color);
        font-size: 0.9rem;
        margin-bottom: 15px;
        line-height: 1.5;
      }

      .item-controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .quantity-controls {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .quantity-btn {
        width: 28px;
        height: 28px;
        border-radius: 50%;
        background-color: var(--medium-gray);
        border: none;
        color: var(--head-color);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-weight: bold;
        font-size: 1rem;
        transition: all 0.2s;
      }

      .quantity-btn:hover {
        background-color: var(--theme-color);
      }

      .quantity {
        font-weight: 600;
        min-width: 25px;
        text-align: center;
        color: var(--head-color);
      }

      .add-btn {
        background-color: var(--theme-color);
        color: var(--head-color);
        border: none;
        padding: 8px 16px;
        border-radius: 6px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
      }

      .add-btn:hover {
        background-color: #c2852e;
      }

      .add-btn.added {
        background-color: var(--success-color);
      }

      /* Step 3: Seat Selection - No Occupied Seats */
      .seat-selection-container {
        max-width: 800px;
        margin: 0 auto;
      }

      .screen-display {
        background-color: var(--medium-gray);
        height: 50px;
        width: 90%;
        margin: 0 auto 40px;
        border-radius: 5px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--head-color);
        font-size: 1.2rem;
        letter-spacing: 3px;
        position: relative;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      .screen-display::before {
        content: "SCREEN";
        position: absolute;
        top: -25px;
        left: 50%;
        transform: translateX(-50%);
        color: var(--theme-color);
        font-size: 0.9rem;
        font-weight: 600;
      }

      .seat-map-container {
        background-color: var(--light-gray);
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 30px;
        overflow-x: auto;
      }

      .seat-map {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
        min-width: 600px;
      }

      .seat-row {
        display: flex;
        gap: 8px;
      }

      .seat {
        width: 35px;
        height: 35px;
        border-radius: 6px 6px 3px 3px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.8rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
        background-color: var(--medium-gray);
        color: var(--secondary-color);
        border: 1px solid transparent;
      }

      .seat:hover {
        background-color: rgba(171, 116, 39, 0.2);
        border-color: var(--theme-color);
      }

      .seat.selected {
        background-color: var(--theme-color);
        color: var(--head-color);
        transform: scale(1.05);
      }

      .seat-legend {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 20px;
        flex-wrap: wrap;
      }

      .legend-item {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 0.9rem;
      }

      .legend-color {
        width: 15px;
        height: 15px;
        border-radius: 3px;
      }

      .seat-instructions {
        text-align: center;
        color: var(--secondary-color);
        margin-top: 20px;
        font-size: 0.9rem;
      }

      /* Step 4: Payment - UPI & Cash Only */
      .payment-container {
        max-width: 800px;
        margin: 0 auto;
      }

      .order-summary-card {
        background-color: var(--light-gray);
        border-radius: 12px;
        padding: 25px;
        margin-bottom: 25px;
        border-left: 4px solid var(--theme-color);
      }

      .order-summary-title {
        color: var(--head-color);
        margin-bottom: 20px;
        font-size: 1.5rem;
      }

      .order-items-list {
        margin-bottom: 20px;
      }

      .order-item {
        display: flex;
        justify-content: space-between;
        padding: 12px 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .order-item:last-child {
        border-bottom: none;
      }

      .order-item-name {
        color: var(--head-color);
      }

      .order-item-price {
        color: var(--theme-color);
        font-weight: 600;
      }

      .order-total {
        display: flex;
        justify-content: space-between;
        font-size: 1.3rem;
        font-weight: 700;
        padding-top: 15px;
        border-top: 2px solid var(--theme-color);
        color: var(--head-color);
      }

      .total-amount {
        color: var(--theme-color);
      }

      .payment-form {
        background-color: var(--light-gray);
        border-radius: 12px;
        padding: 25px;
        border-left: 4px solid var(--theme-color);
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-label {
        display: block;
        margin-bottom: 8px;
        color: var(--head-color);
        font-weight: 500;
      }

      .form-control {
        width: 100%;
        padding: 14px;
        background-color: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        color: var(--head-color);
        font-size: 1rem;
        transition: all 0.3s;
      }

      .form-control:focus {
        outline: none;
        border-color: var(--theme-color);
        background-color: rgba(255, 255, 255, 0.08);
      }

      /* Payment Options - Only UPI & Cash */
      .payment-options {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin-bottom: 25px;
      }

      @media (max-width: 576px) {
        .payment-options {
          grid-template-columns: 1fr;
        }
      }

      .payment-option {
        background-color: rgba(255, 255, 255, 0.05);
        border-radius: 8px;
        padding: 20px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s;
        border: 2px solid transparent;
      }

      .payment-option:hover {
        background-color: rgba(255, 255, 255, 0.08);
        transform: translateY(-3px);
      }

      .payment-option.active {
        border-color: var(--theme-color);
        background-color: rgba(171, 116, 39, 0.1);
        box-shadow: 0 5px 15px rgba(171, 116, 39, 0.2);
      }

      .payment-icon {
        font-size: 2.5rem;
        margin-bottom: 10px;
        color: var(--theme-color);
      }

      .payment-name {
        font-weight: 600;
        color: var(--head-color);
        font-size: 1rem;
      }

      .payment-desc {
        color: var(--secondary-color);
        font-size: 0.85rem;
        margin-top: 5px;
      }

      /* UPI Payment Form */
      .upi-form {
        display: none;
        background-color: rgba(0, 0, 0, 0.2);
        padding: 20px;
        border-radius: 10px;
        margin-top: 20px;
        animation: slideDown 0.3s ease;
      }

      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .upi-form.active {
        display: block;
      }

      .upi-qr-container {
        text-align: center;
        margin: 20px 0;
      }

      .upi-qr-code {
        width: 200px;
        height: 200px;
        background-color: white;
        margin: 0 auto 15px;
        border-radius: 10px;
        padding: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 3rem;
        color: #333;
        border: 2px solid var(--theme-color);
      }

      .upi-id {
        background-color: rgba(255, 255, 255, 0.1);
        padding: 12px;
        border-radius: 8px;
        font-family: monospace;
        font-size: 1.1rem;
        margin: 15px 0;
        text-align: center;
        border: 1px dashed var(--theme-color);
      }

      .upi-instructions {
        background-color: rgba(171, 116, 39, 0.1);
        padding: 15px;
        border-radius: 8px;
        margin-top: 20px;
      }

      .upi-instructions h4 {
        color: var(--theme-color);
        margin-bottom: 10px;
      }

      .upi-instructions ol {
        padding-left: 20px;
        color: var(--secondary-color);
      }

      .upi-instructions li {
        margin-bottom: 8px;
      }

      /* Cash Payment Form */
      .cash-form {
        display: none;
        background-color: rgba(0, 0, 0, 0.2);
        padding: 20px;
        border-radius: 10px;
        margin-top: 20px;
        animation: slideDown 0.3s ease;
      }

      .cash-form.active {
        display: block;
      }

      .cash-instructions {
        background-color: rgba(171, 116, 39, 0.1);
        padding: 20px;
        border-radius: 8px;
        text-align: center;
        margin-top: 20px;
      }

      .cash-instructions h4 {
        color: var(--theme-color);
        margin-bottom: 10px;
      }

      .cash-instructions p {
        color: var(--secondary-color);
        margin-bottom: 15px;
      }

      .cash-collection-point {
        background-color: rgba(0, 0, 0, 0.3);
        padding: 15px;
        border-radius: 8px;
        margin-top: 15px;
        border: 1px solid var(--theme-color);
      }

      .cash-collection-point h5 {
        color: var(--theme-color);
        margin-bottom: 10px;
      }

      /* Buttons */
      .action-buttons {
        display: flex;
        justify-content: space-between;
        margin-top: 30px;
        gap: 15px;
      }

      .btn {
        padding: 14px 28px;
        border-radius: 8px;
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        border: none;
        min-width: 160px;
      }

      .btn-prev {
        background-color: transparent;
        color: var(--head-color);
        border: 1px solid var(--secondary-color);
      }

      .btn-prev:hover {
        background-color: rgba(255, 255, 255, 0.05);
        border-color: var(--theme-color);
      }

      .btn-next {
        background-color: var(--theme-color);
        color: var(--head-color);
      }

      .btn-next:hover {
        background-color: #c2852e;
      }

      .btn-pay {
        background-color: var(--theme-color);
        color: var(--head-color);
        width: 100%;
        margin-top: 15px;
        padding: 16px;
        font-size: 1.1rem;
        font-weight: 700;
      }

      .btn-pay:hover {
        background-color: #c2852e;
      }

      .btn-pay:disabled {
        background-color: var(--medium-gray);
        cursor: not-allowed;
        opacity: 0.6;
      }

      /* Modal */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.9);
        z-index: 2000;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      .modal.active {
        display: flex;
      }

      .modal-content {
        background-color: var(--light-gray);
        border-radius: 15px;
        width: 100%;
        max-width: 500px;
        padding: 30px;
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        border-top: 5px solid var(--theme-color);
        animation: modalAppear 0.4s ease;
      }

      @keyframes modalAppear {
        from {
          opacity: 0;
          transform: scale(0.9);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      .modal-icon {
        font-size: 4rem;
        color: var(--theme-color);
        margin-bottom: 20px;
        text-align: center;
      }

      .modal-title {
        font-size: 2rem;
        color: var(--head-color);
        margin-bottom: 15px;
        text-align: center;
      }

      .modal-message {
        color: var(--secondary-color);
        margin-bottom: 25px;
        line-height: 1.6;
        text-align: center;
      }

      .modal-order-details {
        background-color: rgba(0, 0, 0, 0.2);
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 25px;
      }

      .modal-detail {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
      }

      .modal-detail.total {
        font-weight: 700;
        color: var(--theme-color);
        font-size: 1.2rem;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        padding-top: 10px;
        margin-top: 10px;
      }

      .modal-actions {
        display: flex;
        gap: 15px;
      }

      .modal-btn {
        flex: 1;
        padding: 14px;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        border: none;
        transition: all 0.3s;
      }

      .modal-btn-primary {
        background-color: var(--theme-color);
        color: var(--head-color);
      }

      .modal-btn-primary:hover {
        background-color: #c2852e;
      }

      .modal-btn-secondary {
        background-color: transparent;
        color: var(--head-color);
        border: 1px solid var(--secondary-color);
      }

      .modal-btn-secondary:hover {
        background-color: rgba(255, 255, 255, 0.05);
      }

      /* Toast Notification */
      .toast {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: var(--theme-color);
        color: var(--head-color);
        padding: 15px 20px;
        border-radius: 8px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        z-index: 1001;
        display: flex;
        align-items: center;
        gap: 10px;
        transform: translateY(100px);
        opacity: 0;
        transition: all 0.3s;
      }

      .toast.show {
        transform: translateY(0);
        opacity: 1;
      }

      .toast-icon {
        font-size: 1.2rem;
      }

      /* Loading Spinner */
      .spinner {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top-color: var(--theme-color);
        animation: spin 1s ease-in-out infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* Step Navigation Indicator */
      .step-navigation {
        text-align: center;
        margin: 15px 0 30px;
        color: var(--secondary-color);
        font-size: 0.9rem;
      }

      .step-navigation a {
        color: var(--theme-color);
        text-decoration: none;
        font-weight: 600;
      }

      .step-navigation a:hover {
        text-decoration: underline;
      }

      /* Responsive */
      @media (max-width: 992px) {
        .categories-grid,
        .items-grid {
          grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        }
      }

      @media (max-width: 768px) {
        .top-bar {
          padding: 12px 15px;
        }

        .progress-steps {
          padding: 60px 15px 15px;
        }

        .step-name {
          font-size: 0.7rem;
        }

        .step-circle {
          width: 35px;
          height: 35px;
          font-size: 0.9rem;
        }

        .categories-grid,
        .items-grid {
          grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
        }

        .upi-qr-code {
          width: 180px;
          height: 180px;
          font-size: 2.5rem;
        }

        .action-buttons {
          flex-direction: column;
        }

        .btn {
          width: 100%;
          min-width: unset;
        }
      }

      @media (max-width: 576px) {
        .progress-steps {
          padding-top: 55px;
        }

        .step {
          max-width: 80px;
        }

        .step-line {
          display: none;
        }

        .categories-grid,
        .items-grid {
          grid-template-columns: 1fr;
        }

        .seat {
          width: 30px;
          height: 30px;
          font-size: 0.7rem;
        }

        .upi-qr-code {
          width: 150px;
          height: 150px;
          font-size: 2rem;
        }

        .modal-content {
          padding: 20px;
        }

        .modal-actions {
          flex-direction: column;
        }
      }
    </style>
  </head>
  <body>
    <!-- Top Bar -->
    <div class="top-bar">
      <div class="logo">
        <i class="fas fa-film logo-icon"></i>
        <div class="logo-text">THEATRE EXPRESS</div>
      </div>
      <div class="cart-summary">
        <div class="cart-icon" id="cart-icon">
          <i class="fas fa-shopping-cart"></i>
          <span class="cart-count" id="cart-count">0</span>
        </div>
        <div style="font-size: 0.9rem">
          <span id="current-step-text">Step 1 of 4</span>
        </div>
      </div>
    </div>

    <!-- Progress Steps - Clickable -->
    <div class="progress-steps">
      <div class="step active" id="step-1" data-step="1">
        <div class="step-circle">1</div>
        <div class="step-name">Category</div>
      </div>
      <div class="step-line"></div>
      <div class="step disabled" id="step-2" data-step="2">
        <div class="step-circle">2</div>
        <div class="step-name">Items</div>
      </div>
      <div class="step-line"></div>
      <div class="step disabled" id="step-3" data-step="3">
        <div class="step-circle">3</div>
        <div class="step-name">Seat</div>
      </div>
      <div class="step-line"></div>
      <div class="step disabled" id="step-4" data-step="4">
        <div class="step-circle">4</div>
        <div class="step-name">Payment</div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Step 1: Category Selection -->
      <section class="step-section active" id="step-section-1">
        <div class="section-title">
          <h2>Choose Category</h2>
          <p>Select a category to browse items</p>
        </div>
        <div class="categories-grid" id="categories-container">
          <!-- Categories will be loaded by JavaScript -->
        </div>
        <div class="step-navigation">
          <p>
            Click on any category to automatically proceed to item selection
          </p>
        </div>
        <div class="action-buttons">
          <div></div>
          <!-- Empty div for spacing -->
          <button class="btn btn-next" id="next-to-items" style="display: none">
            Continue to Items <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </section>

      <!-- Step 2: Item Selection -->
      <section class="step-section" id="step-section-2">
        <div class="section-title">
          <h2>Select Items</h2>
          <p>Add items to your order</p>
        </div>
        <div class="step-navigation">
          <a href="#" id="back-to-categories-link"
            ><i class="fas fa-arrow-left"></i> Back to Categories</a
          >
        </div>
        <div class="items-grid" id="items-container">
          <!-- Items will be loaded by JavaScript -->
        </div>
        <div class="action-buttons">
          <button class="btn btn-prev" id="prev-to-categories">
            <i class="fas fa-arrow-left"></i> Back to Categories
          </button>
          <button class="btn btn-next" id="next-to-seats">
            Continue to Seat Selection <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </section>

      <!-- Step 3: Seat Selection -->
      <section class="step-section" id="step-section-3">
        <div class="section-title">
          <h2>Select Your Seat</h2>
          <p>Choose your preferred seat</p>
        </div>
        <div class="step-navigation">
          <a href="#" id="back-to-items-link"
            ><i class="fas fa-arrow-left"></i> Back to Items</a
          >
        </div>
        <div class="seat-selection-container">
          <div class="screen-display">SCREEN</div>
          <div class="seat-map-container">
            <div class="seat-map" id="seat-map">
              <!-- Seat map will be generated by JavaScript -->
            </div>
            <div class="seat-legend">
              <div class="legend-item">
                <div
                  class="legend-color"
                  style="background-color: var(--medium-gray)"
                ></div>
                <span>Available</span>
              </div>
              <div class="legend-item">
                <div
                  class="legend-color"
                  style="background-color: var(--theme-color)"
                ></div>
                <span>Selected</span>
              </div>
            </div>
          </div>
          <div class="seat-instructions">
            <p>
              Click on an available seat to select it. Your selected seat will
              be highlighted in gold.
            </p>
          </div>
        </div>
        <div class="action-buttons">
          <button class="btn btn-prev" id="prev-to-items">
            <i class="fas fa-arrow-left"></i> Back to Items
          </button>
          <button class="btn btn-next" id="next-to-payment">
            Continue to Payment <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </section>

      <!-- Step 4: Payment - UPI & Cash Only -->
      <section class="step-section" id="step-section-4">
        <div class="section-title">
          <h2>Complete Your Order</h2>
          <p>Review and confirm your order</p>
        </div>
        <div class="step-navigation">
          <a href="#" id="back-to-seat-link"
            ><i class="fas fa-arrow-left"></i> Back to Seat Selection</a
          >
        </div>
        <div class="payment-container">
          <div class="order-summary-card">
            <h3 class="order-summary-title">Order Summary</h3>
            <div class="order-items-list" id="order-summary-items">
              <div
                style="
                  text-align: center;
                  color: var(--secondary-color);
                  padding: 20px;
                "
              >
                No items in your order yet
              </div>
            </div>
            <div class="order-total">
              <span>Total Amount:</span>
              <span class="total-amount" id="order-total-amount">$0.00</span>
            </div>
          </div>

          <div class="payment-form">
            <h3 class="order-summary-title">Select Payment Method</h3>

            <div class="payment-options">
              <div class="payment-option active" data-method="upi">
                <i class="fas fa-qrcode payment-icon"></i>
                <div class="payment-name">UPI Payment</div>
                <div class="payment-desc">Scan QR Code or Pay by UPI ID</div>
              </div>
              <div class="payment-option" data-method="cash">
                <i class="fas fa-money-bill-wave payment-icon"></i>
                <div class="payment-name">Cash Payment</div>
                <div class="payment-desc">Pay at Concession Counter</div>
              </div>
            </div>

            <!-- UPI Payment Form -->
            <div class="upi-form active" id="upi-form">
              <h4
                style="
                  color: var(--theme-color);
                  margin-bottom: 15px;
                  text-align: center;
                "
              >
                Pay via UPI
              </h4>

              <div class="upi-qr-container">
                <div class="upi-qr-code">
                  <i class="fas fa-qrcode"></i>
                </div>
                <p style="color: var(--secondary-color); margin-bottom: 10px">
                  Scan QR Code with any UPI App
                </p>
                <p style="font-weight: 600; color: var(--head-color)">OR</p>
              </div>

              <div style="margin: 20px 0">
                <p style="color: var(--secondary-color); margin-bottom: 8px">
                  Send payment to UPI ID:
                </p>
                <div class="upi-id">theatre.express@upi</div>
                <p
                  style="
                    color: var(--secondary-color);
                    font-size: 0.9rem;
                    margin-top: 10px;
                  "
                >
                  Use any UPI app: Google Pay, PhonePe, Paytm, etc.
                </p>
              </div>

              <div class="upi-instructions">
                <h4>How to Pay:</h4>
                <ol>
                  <li>Open your UPI app (Google Pay, PhonePe, Paytm, etc.)</li>
                  <li>
                    Scan the QR code or enter UPI ID:
                    <strong>theatre.express@upi</strong>
                  </li>
                  <li>Enter the exact amount shown above</li>
                  <li>Add note: <strong>Seat [Your Seat Number]</strong></li>
                  <li>Complete the payment</li>
                </ol>
              </div>

              <div class="form-group">
                <label class="form-label">Transaction ID (After Payment)</label>
                <input
                  type="text"
                  class="form-control"
                  id="transaction-id"
                  placeholder="Enter your UPI transaction ID"
                />
                <small
                  style="
                    color: var(--secondary-color);
                    display: block;
                    margin-top: 5px;
                  "
                  >You'll find this in your UPI app after payment</small
                >
              </div>

              <div class="form-group">
                <label class="form-label">WhatsApp Number for E-Bill</label>
                <input
                  type="tel"
                  class="form-control"
                  id="whatsapp-number"
                  placeholder="+91 98765 43210"
                />
              </div>
            </div>

            <!-- Cash Payment Form -->
            <div class="cash-form" id="cash-form">
              <h4
                style="
                  color: var(--theme-color);
                  margin-bottom: 15px;
                  text-align: center;
                "
              >
                Pay with Cash
              </h4>

              <div class="cash-instructions">
                <h4>Cash Payment Instructions</h4>
                <p>
                  Please collect your order and pay at the concession counter.
                </p>
                <p style="font-weight: 600; color: var(--head-color)">
                  Show your e-bill and seat number to collect items.
                </p>
              </div>

              <div class="cash-collection-point">
                <h5>Cash Collection Point</h5>
                <p style="color: var(--secondary-color); margin-bottom: 10px">
                  Location: Concession Counter, Main Lobby
                </p>
                <p style="color: var(--secondary-color)">
                  Timing: 30 minutes before showtime until 30 minutes after show
                  starts
                </p>
              </div>

              <div class="form-group">
                <label class="form-label">WhatsApp Number for E-Bill</label>
                <input
                  type="tel"
                  class="form-control"
                  id="cash-whatsapp-number"
                  placeholder="+91 98765 43210"
                />
                <small
                  style="
                    color: var(--secondary-color);
                    display: block;
                    margin-top: 5px;
                  "
                  >Your e-bill will be sent to this number</small
                >
              </div>
            </div>

            <button class="btn btn-pay" id="process-payment">
              <i class="fas fa-check-circle"></i> Confirm Order & Get E-Bill
            </button>
          </div>
        </div>
        <div class="action-buttons">
          <button class="btn btn-prev" id="prev-to-seats">
            <i class="fas fa-arrow-left"></i> Back to Seat Selection
          </button>
          <div></div>
          <!-- Empty div for spacing -->
        </div>
      </section>
    </div>

    <!-- Success Modal -->
    <div class="modal" id="success-modal">
      <div class="modal-content">
        <div class="modal-icon">
          <i class="fas fa-check-circle"></i>
        </div>
        <h2 class="modal-title">Order Confirmed!</h2>
        <div class="modal-message">
          Your order has been confirmed. Your e-bill has been sent to your
          WhatsApp number.
        </div>
        <div class="modal-order-details">
          <div class="modal-detail">
            <span>Order ID:</span>
            <span id="modal-order-id">TE-789456</span>
          </div>
          <div class="modal-detail">
            <span>Seat Number:</span>
            <span id="modal-seat-number">A12</span>
          </div>
          <div class="modal-detail">
            <span>Total Amount:</span>
            <span id="modal-total-amount">$0.00</span>
          </div>
          <div class="modal-detail">
            <span>Payment Method:</span>
            <span id="modal-payment-method">UPI</span>
          </div>
          <div class="modal-detail total">
            <span>WhatsApp Bill Sent To:</span>
            <span id="modal-whatsapp-number">+91 98765 43210</span>
          </div>
        </div>
        <div class="modal-actions">
          <button class="modal-btn modal-btn-primary" id="close-modal">
            Done
          </button>
          <button class="modal-btn modal-btn-secondary" id="new-order">
            Place New Order
          </button>
        </div>
      </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
      <i class="fas fa-check-circle toast-icon"></i>
      <span id="toast-message">Item added to cart</span>
    </div>

    <script>
      // Data
      const categories = [
        {
          id: 1,
          name: "Popcorn",
          icon: "fa-popcorn",
          desc: "Freshly popped popcorn varieties",
        },
        {
          id: 2,
          name: "Drinks",
          icon: "fa-glass-whiskey",
          desc: "Cold and hot beverages",
        },
        {
          id: 3,
          name: "Snacks",
          icon: "fa-utensils",
          desc: "Crispy snacks and treats",
        },
        {
          id: 4,
          name: "Combo Meals",
          icon: "fa-gift",
          desc: "Best value combos",
        },
      ];

      const menuItems = {
        1: [
          // Popcorn
          {
            id: 101,
            name: "Classic Popcorn (Large)",
            price: 8.99,
            desc: "Freshly popped, lightly salted",
            icon: "fa-popcorn",
            badge: "Popular",
          },
          {
            id: 102,
            name: "Caramel Popcorn",
            price: 9.99,
            desc: "Sweet caramel coated popcorn",
            icon: "fa-candy-cane",
          },
          {
            id: 103,
            name: "Cheese Popcorn",
            price: 9.99,
            desc: "Rich cheddar cheese flavor",
            icon: "fa-cheese",
            badge: "New",
          },
          {
            id: 104,
            name: "Mixed Popcorn",
            price: 10.99,
            desc: "Caramel and cheese mix",
            icon: "fa-bowl-food",
          },
        ],
        2: [
          // Drinks
          {
            id: 201,
            name: "Soft Drink (Large)",
            price: 4.99,
            desc: "Coke, Pepsi, Sprite or Fanta",
            icon: "fa-glass-whiskey",
          },
          {
            id: 202,
            name: "Bottled Water",
            price: 2.99,
            desc: "Premium spring water",
            icon: "fa-wine-bottle",
          },
          {
            id: 203,
            name: "Iced Tea",
            price: 3.99,
            desc: "Freshly brewed iced tea",
            icon: "fa-glass-water",
            badge: "Refreshing",
          },
          {
            id: 204,
            name: "Hot Chocolate",
            price: 4.49,
            desc: "Rich, creamy hot chocolate",
            icon: "fa-mug-hot",
          },
        ],
        3: [
          // Snacks
          {
            id: 301,
            name: "Nachos Supreme",
            price: 7.99,
            desc: "Crispy tortilla chips with cheese dip",
            icon: "fa-utensils",
          },
          {
            id: 302,
            name: "Pretzel Bites",
            price: 6.99,
            desc: "Soft pretzel bites with cheese sauce",
            icon: "fa-bread-slice",
            badge: "Hot",
          },
          {
            id: 303,
            name: "Chicken Tenders",
            price: 8.99,
            desc: "Crispy chicken tenders with dip",
            icon: "fa-drumstick-bite",
          },
          {
            id: 304,
            name: "French Fries",
            price: 5.99,
            desc: "Golden crispy fries",
            icon: "fa-bacon",
          },
        ],
        4: [
          // Combo Meals
          {
            id: 401,
            name: "Classic Combo",
            price: 12.99,
            desc: "Large popcorn + Large soft drink",
            icon: "fa-gift",
            badge: "Best Value",
          },
          {
            id: 402,
            name: "Deluxe Combo",
            price: 16.99,
            desc: "Mixed popcorn + 2 large drinks",
            icon: "fa-crown",
          },
          {
            id: 403,
            name: "Family Combo",
            price: 24.99,
            desc: "2 large popcorns + 4 drinks + nachos",
            icon: "fa-users",
          },
          {
            id: 404,
            name: "Snack Combo",
            price: 14.99,
            desc: "Popcorn + drink + nachos",
            icon: "fa-heart",
          },
        ],
      };

      // App State
      let currentStep = 1;
      let selectedCategory = null;
      let order = [];
      let selectedSeat = "";
      let paymentMethod = "upi";

      // Initialize the application
      document.addEventListener("DOMContentLoaded", function () {
        renderCategories();
        setupEventListeners();
        updateCartCount();
        updateStepText();
        updateStepNavigation();
      });

      // Render categories
      function renderCategories() {
        const container = document.getElementById("categories-container");
        container.innerHTML = "";

        categories.forEach((category) => {
          const categoryCard = document.createElement("a");
          categoryCard.className = "category-card";
          categoryCard.dataset.id = category.id;
          categoryCard.href = "#";

          categoryCard.innerHTML = `
                    <div class="category-img">
                        <i class="fas ${category.icon}"></i>
                    </div>
                    <div class="category-content">
                        <h3 class="category-name">${category.name}</h3>
                        <p class="category-desc">${category.desc}</p>
                        <div class="category-action">
                            <div class="category-select">Click to select</div>
                            <div class="category-price">Browse Items</div>
                        </div>
                    </div>
                `;

          categoryCard.addEventListener("click", (e) => {
            e.preventDefault();
            selectCategory(category.id);
            // Automatically go to step 2 after selecting category
            goToStep(2);
          });

          container.appendChild(categoryCard);
        });
      }

      // Select a category
      function selectCategory(categoryId) {
        selectedCategory = categoryId;

        // Update UI
        document.querySelectorAll(".category-card").forEach((card) => {
          card.classList.remove("active");
          if (parseInt(card.dataset.id) === categoryId) {
            card.classList.add("active");
          }
        });

        // Enable step 2
        document.getElementById("step-2").classList.remove("disabled");
      }

      // Render items for selected category
      function renderItems() {
        if (!selectedCategory) return;

        const container = document.getElementById("items-container");
        container.innerHTML = "";

        const items = menuItems[selectedCategory];

        if (!items || items.length === 0) {
          container.innerHTML =
            '<p style="text-align: center; grid-column: 1/-1; color: var(--secondary-color); padding: 40px;">No items available in this category.</p>';
          return;
        }

        items.forEach((item) => {
          const itemCard = document.createElement("div");
          itemCard.className = "item-card";
          itemCard.dataset.id = item.id;

          // Check if item is already in cart
          const cartItem = order.find((orderItem) => orderItem.id === item.id);
          const quantity = cartItem ? cartItem.quantity : 0;
          const isInCart = quantity > 0;

          itemCard.innerHTML = `
                    <div class="item-img">
                        <i class="fas ${item.icon}"></i>
                        ${item.badge ? `<div class="item-badge">${item.badge}</div>` : ""}
                    </div>
                    <div class="item-content">
                        <div class="item-header">
                            <h3 class="item-name">${item.name}</h3>
                            <div class="item-price">$${item.price.toFixed(2)}</div>
                        </div>
                        <p class="item-desc">${item.desc}</p>
                        <div class="item-controls">
                            <div class="quantity-controls">
                                <button class="quantity-btn minus" data-id="${item.id}">-</button>
                                <span class="quantity" id="quantity-${item.id}">${quantity}</span>
                                <button class="quantity-btn plus" data-id="${item.id}">+</button>
                            </div>
                            <button class="add-btn ${isInCart ? "added" : ""}" data-id="${item.id}">
                                ${isInCart ? '<i class="fas fa-check"></i> Added' : '<i class="fas fa-plus"></i> Add'}
                            </button>
                        </div>
                    </div>
                `;

          container.appendChild(itemCard);

          // Add event listeners
          const plusBtn = itemCard.querySelector(".plus");
          const minusBtn = itemCard.querySelector(".minus");
          const addBtn = itemCard.querySelector(".add-btn");

          plusBtn.addEventListener("click", () => changeQuantity(item.id, 1));
          minusBtn.addEventListener("click", () => changeQuantity(item.id, -1));
          addBtn.addEventListener("click", () => addToOrder(item));
        });

        // Enable step 3 if we have items in cart
        if (order.length > 0) {
          document.getElementById("step-3").classList.remove("disabled");
        }
      }

      // Change item quantity
      function changeQuantity(itemId, change) {
        const quantityElement = document.getElementById(`quantity-${itemId}`);
        let quantity = parseInt(quantityElement.textContent) || 0;

        quantity += change;
        if (quantity < 0) quantity = 0;

        quantityElement.textContent = quantity;

        // Update the order if item is already in cart
        const orderItemIndex = order.findIndex((item) => item.id === itemId);
        if (orderItemIndex >= 0) {
          if (quantity === 0) {
            order.splice(orderItemIndex, 1);
          } else {
            order[orderItemIndex].quantity = quantity;
          }
          updateCartCount();
          updateAddButton(itemId, quantity > 0);
          updateStepNavigation();
        }
      }

      // Add item to order
      function addToOrder(item) {
        const quantityElement = document.getElementById(`quantity-${item.id}`);
        let quantity = parseInt(quantityElement.textContent) || 0;

        if (quantity === 0) {
          quantity = 1;
          quantityElement.textContent = quantity;
        }

        // Check if item already exists in order
        const existingItemIndex = order.findIndex(
          (orderItem) => orderItem.id === item.id,
        );

        if (existingItemIndex >= 0) {
          order[existingItemIndex].quantity = quantity;
        } else {
          order.push({
            id: item.id,
            name: item.name,
            price: item.price,
            quantity: quantity,
          });
        }

        updateCartCount();
        updateAddButton(item.id, true);
        showToast(`${item.name} added to cart`);
        updateStepNavigation();

        // Visual feedback
        const itemCard = document.querySelector(
          `.item-card[data-id="${item.id}"]`,
        );
        itemCard.style.transform = "translateY(-5px)";
        itemCard.style.boxShadow = "0 15px 30px rgba(171, 116, 39, 0.2)";

        setTimeout(() => {
          itemCard.style.transform = "";
          itemCard.style.boxShadow = "";
        }, 300);
      }

      // Update add button state
      function updateAddButton(itemId, isAdded) {
        const addBtn = document.querySelector(`.add-btn[data-id="${item.id}"]`);
        if (addBtn) {
          if (isAdded) {
            addBtn.classList.add("added");
            addBtn.innerHTML = '<i class="fas fa-check"></i> Added';
          } else {
            addBtn.classList.remove("added");
            addBtn.innerHTML = '<i class="fas fa-plus"></i> Add';
          }
        }
      }

      // Update cart count
      function updateCartCount() {
        const totalItems = order.reduce((sum, item) => sum + item.quantity, 0);
        document.getElementById("cart-count").textContent = totalItems;
      }

      // Show toast notification
      function showToast(message) {
        const toast = document.getElementById("toast");
        const toastMessage = document.getElementById("toast-message");

        toastMessage.textContent = message;
        toast.classList.add("show");

        setTimeout(() => {
          toast.classList.remove("show");
        }, 3000);
      }

      // Render seat map - NO OCCUPIED SEATS
      function renderSeatMap() {
        const seatMap = document.getElementById("seat-map");
        seatMap.innerHTML = "";

        const rows = ["A", "B", "C", "D", "E"];
        const seatsPerRow = 10;

        rows.forEach((row) => {
          const rowDiv = document.createElement("div");
          rowDiv.className = "seat-row";

          for (let i = 1; i <= seatsPerRow; i++) {
            const seatDiv = document.createElement("div");
            seatDiv.className = "seat";
            seatDiv.textContent = `${row}${i}`;
            seatDiv.dataset.seat = `${row}${i}`;

            seatDiv.addEventListener("click", () => {
              selectedSeat = seatDiv.dataset.seat;
              highlightSelectedSeat();
              // Enable step 4
              document.getElementById("step-4").classList.remove("disabled");
              updateStepNavigation();
            });

            rowDiv.appendChild(seatDiv);

            // Add aisle space
            if (i === 5) {
              const spacer = document.createElement("div");
              spacer.style.width = "20px";
              rowDiv.appendChild(spacer);
            }
          }

          seatMap.appendChild(rowDiv);
        });

        // Highlight previously selected seat if any
        if (selectedSeat) {
          highlightSelectedSeat();
        }
      }

      // Highlight selected seat
      function highlightSelectedSeat() {
        document.querySelectorAll(".seat").forEach((seat) => {
          seat.classList.remove("selected");
        });

        if (selectedSeat) {
          const seatElement = document.querySelector(
            `.seat[data-seat="${selectedSeat}"]`,
          );
          if (seatElement) {
            seatElement.classList.add("selected");
          }
        }
      }

      // Update order summary
      function updateOrderSummary() {
        const container = document.getElementById("order-summary-items");
        container.innerHTML = "";

        if (order.length === 0) {
          container.innerHTML =
            '<div style="text-align: center; color: var(--secondary-color); padding: 20px;">No items in your order yet</div>';
          document.getElementById("order-total-amount").textContent = "$0.00";
          return;
        }

        let subtotal = 0;

        order.forEach((item) => {
          const itemTotal = item.price * item.quantity;
          subtotal += itemTotal;

          const orderItem = document.createElement("div");
          orderItem.className = "order-item";
          orderItem.innerHTML = `
                    <span class="order-item-name">${item.name} x${item.quantity}</span>
                    <span class="order-item-price">$${itemTotal.toFixed(2)}</span>
                `;
          container.appendChild(orderItem);
        });

        const tax = subtotal * 0.08;
        const total = subtotal + tax;

        // Add tax row
        const taxRow = document.createElement("div");
        taxRow.className = "order-item";
        taxRow.innerHTML = `
                <span class="order-item-name">Tax (8%)</span>
                <span class="order-item-price">$${tax.toFixed(2)}</span>
            `;
        container.appendChild(taxRow);

        document.getElementById("order-total-amount").textContent =
          `$${total.toFixed(2)}`;
      }

      // Update step text
      function updateStepText() {
        document.getElementById("current-step-text").textContent =
          `Step ${currentStep} of 4`;
      }

      // Update step navigation
      function updateStepNavigation() {
        // Update step indicators
        const steps = document.querySelectorAll(".step");
        steps.forEach((step, index) => {
          const stepNumber = index + 1;

          // Remove all classes
          step.classList.remove("active", "completed", "disabled");

          // Mark current step as active
          if (stepNumber === currentStep) {
            step.classList.add("active");
          }
          // Mark previous steps as completed
          else if (stepNumber < currentStep) {
            step.classList.add("completed");
          }
          // Enable/disable steps based on progress
          else if (stepNumber > currentStep) {
            // Step 2 requires a category
            if (stepNumber === 2 && !selectedCategory) {
              step.classList.add("disabled");
            }
            // Step 3 requires items in cart
            else if (stepNumber === 3 && order.length === 0) {
              step.classList.add("disabled");
            }
            // Step 4 requires a selected seat
            else if (stepNumber === 4 && !selectedSeat) {
              step.classList.add("disabled");
            }
          }
        });
      }

      // Setup event listeners
      function setupEventListeners() {
        // Step navigation in progress bar
        document.querySelectorAll(".step").forEach((step) => {
          step.addEventListener("click", () => {
            if (step.classList.contains("disabled")) {
              showToast("Please complete the previous steps first");
              return;
            }

            const stepNumber = parseInt(step.dataset.step);

            // Validate if we can go to this step
            if (stepNumber === 2 && !selectedCategory) {
              showToast("Please select a category first");
              return;
            } else if (stepNumber === 3 && order.length === 0) {
              showToast("Please add at least one item to your cart");
              return;
            } else if (stepNumber === 4 && !selectedSeat) {
              showToast("Please select a seat first");
              return;
            }

            goToStep(stepNumber);
          });
        });

        // Step navigation buttons
        document
          .getElementById("next-to-items")
          .addEventListener("click", () => {
            if (!selectedCategory) {
              showToast("Please select a category first");
              return;
            }
            renderItems();
            goToStep(2);
          });

        document
          .getElementById("prev-to-categories")
          .addEventListener("click", () => goToStep(1));

        document
          .getElementById("back-to-categories-link")
          .addEventListener("click", (e) => {
            e.preventDefault();
            goToStep(1);
          });

        document
          .getElementById("next-to-seats")
          .addEventListener("click", () => {
            if (order.length === 0) {
              showToast("Please add at least one item to your cart");
              return;
            }
            renderSeatMap();
            goToStep(3);
          });

        document
          .getElementById("prev-to-items")
          .addEventListener("click", () => goToStep(2));

        document
          .getElementById("back-to-items-link")
          .addEventListener("click", (e) => {
            e.preventDefault();
            goToStep(2);
          });

        document
          .getElementById("next-to-payment")
          .addEventListener("click", () => {
            if (!selectedSeat) {
              showToast("Please select a seat before proceeding");
              return;
            }
            updateOrderSummary();
            goToStep(4);
          });

        document
          .getElementById("prev-to-seats")
          .addEventListener("click", () => goToStep(3));

        document
          .getElementById("back-to-seat-link")
          .addEventListener("click", (e) => {
            e.preventDefault();
            goToStep(3);
          });

        // Payment options - UPI & Cash Only
        document.querySelectorAll(".payment-option").forEach((option) => {
          option.addEventListener("click", () => {
            document.querySelectorAll(".payment-option").forEach((opt) => {
              opt.classList.remove("active");
            });
            option.classList.add("active");
            paymentMethod = option.dataset.method;

            // Show/hide appropriate form
            if (paymentMethod === "upi") {
              document.getElementById("upi-form").classList.add("active");
              document.getElementById("cash-form").classList.remove("active");
            } else if (paymentMethod === "cash") {
              document.getElementById("cash-form").classList.add("active");
              document.getElementById("upi-form").classList.remove("active");
            }
          });
        });

        // Process payment
        document
          .getElementById("process-payment")
          .addEventListener("click", processPayment);

        // Close modal
        document.getElementById("close-modal").addEventListener("click", () => {
          document.getElementById("success-modal").classList.remove("active");
        });

        // New order button
        document.getElementById("new-order").addEventListener("click", () => {
          document.getElementById("success-modal").classList.remove("active");
          resetOrder();
          goToStep(1);
        });

        // Cart icon
        document.getElementById("cart-icon").addEventListener("click", () => {
          if (order.length === 0) {
            showToast("Your cart is empty");
          } else {
            let message = "Your Order:\n\n";
            order.forEach((item) => {
              message += `${item.name} x${item.quantity}: $${(item.price * item.quantity).toFixed(2)}\n`;
            });

            const subtotal = order.reduce(
              (sum, item) => sum + item.price * item.quantity,
              0,
            );
            const tax = subtotal * 0.08;
            const total = subtotal + tax;

            message += `\nSubtotal: $${subtotal.toFixed(2)}\n`;
            message += `Tax (8%): $${tax.toFixed(2)}\n`;
            message += `Total: $${total.toFixed(2)}`;

            alert(message);
          }
        });
      }

      // Go to specific step
      function goToStep(step) {
        // Update current step
        currentStep = step;

        // Update step text
        updateStepText();

        // Update step navigation
        updateStepNavigation();

        // Load appropriate content for the step
        if (step === 2 && selectedCategory) {
          renderItems();
        } else if (step === 3) {
          renderSeatMap();
        } else if (step === 4) {
          updateOrderSummary();
        }

        // Show/hide step sections
        document.querySelectorAll(".step-section").forEach((section) => {
          section.classList.remove("active");
        });
        document.getElementById(`step-section-${step}`).classList.add("active");

        // Scroll to top
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      // Process payment - UPI or Cash
      function processPayment() {
        const whatsappNumber =
          paymentMethod === "upi"
            ? document.getElementById("whatsapp-number").value.trim()
            : document.getElementById("cash-whatsapp-number").value.trim();

        const transactionId =
          paymentMethod === "upi"
            ? document.getElementById("transaction-id").value.trim()
            : "CASH-" + Math.floor(1000 + Math.random() * 9000);

        // Validation
        if (order.length === 0) {
          showToast("Please add items to your order");
          return;
        }

        if (!selectedSeat) {
          showToast("Please select a seat");
          return;
        }

        if (!whatsappNumber) {
          showToast("Please enter your WhatsApp number");
          return;
        }

        if (paymentMethod === "upi" && !transactionId) {
          showToast("Please enter your UPI transaction ID");
          return;
        }

        // Calculate total
        const subtotal = order.reduce(
          (sum, item) => sum + item.price * item.quantity,
          0,
        );
        const tax = subtotal * 0.08;
        const total = subtotal + tax;
        const orderId = "TE-" + Math.floor(100000 + Math.random() * 900000);

        // Simulate payment processing
        const payButton = document.getElementById("process-payment");
        const originalText = payButton.innerHTML;
        payButton.innerHTML = '<span class="spinner"></span> Processing...';
        payButton.disabled = true;

        setTimeout(() => {
          // Generate WhatsApp message
          const orderDate = new Date().toLocaleDateString("en-US", {
            weekday: "long",
            year: "numeric",
            month: "long",
            day: "numeric",
            hour: "2-digit",
            minute: "2-digit",
          });

          let message = `*Theatre Express - Order Confirmation*\n`;
          message += `Date: ${orderDate}\n`;
          message += `Order ID: ${orderId}\n`;
          message += `Seat: ${selectedSeat}\n`;
          message += `Payment Method: ${paymentMethod === "upi" ? "UPI" : "Cash"}\n`;

          if (paymentMethod === "upi") {
            message += `Transaction ID: ${transactionId}\n`;
          } else {
            message += `Payment Status: Pay at Counter\n`;
          }

          message += `\n*Order Summary:*\n`;

          order.forEach((item) => {
            message += `- ${item.name} x${item.quantity}: $${(item.price * item.quantity).toFixed(2)}\n`;
          });

          message += `\nSubtotal: $${subtotal.toFixed(2)}\n`;
          message += `Tax (8%): $${tax.toFixed(2)}\n`;
          message += `*Total: $${total.toFixed(2)}*\n\n`;

          if (paymentMethod === "upi") {
            message += `UPI Payment Received. Thank you!\n`;
          } else {
            message += `Please pay at the concession counter.\n`;
            message += `Show this bill to collect your items.\n`;
          }

          message += `\nEnjoy your movie at Theatre Express!`;

          // Encode message for URL
          const encodedMessage = encodeURIComponent(message);

          // Create WhatsApp URL
          const whatsappURL = `https://wa.me/${whatsappNumber.replace(/\D/g, "")}?text=${encodedMessage}`;

          // Update modal with order details
          document.getElementById("modal-order-id").textContent = orderId;
          document.getElementById("modal-seat-number").textContent =
            selectedSeat;
          document.getElementById("modal-total-amount").textContent =
            `$${total.toFixed(2)}`;
          document.getElementById("modal-payment-method").textContent =
            paymentMethod === "upi" ? "UPI" : "Cash";
          document.getElementById("modal-whatsapp-number").textContent =
            whatsappNumber;

          // Open WhatsApp in new tab
          window.open(whatsappURL, "_blank");

          // Show success modal
          setTimeout(() => {
            document.getElementById("success-modal").classList.add("active");
          }, 500);

          // Reset payment button
          payButton.innerHTML = originalText;
          payButton.disabled = false;
        }, 2000); // Simulate processing delay
      }

      // Reset order for new purchase
      function resetOrder() {
        order = [];
        selectedCategory = null;
        selectedSeat = "";
        paymentMethod = "upi";

        // Reset UI
        document.querySelectorAll(".category-card").forEach((card) => {
          card.classList.remove("active");
        });

        updateCartCount();
        updateStepNavigation();

        // Reset form
        document.getElementById("whatsapp-number").value = "";
        document.getElementById("transaction-id").value = "";
        document.getElementById("cash-whatsapp-number").value = "";

        // Reset payment options
        document.querySelectorAll(".payment-option").forEach((opt) => {
          opt.classList.remove("active");
        });
        document
          .querySelector('.payment-option[data-method="upi"]')
          .classList.add("active");
        document.getElementById("upi-form").classList.add("active");
        document.getElementById("cash-form").classList.remove("active");
      }
    </script>
  </body>
</html>
